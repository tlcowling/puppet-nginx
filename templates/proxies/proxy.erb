<%- if @proxy_pass -%>
proxy_pass <%= @proxy_pass %>;
<%- end -%>
<%- if @proxy_bind -%>
proxy_bind <%= @proxy_bind %>;
<%- end -%>
<%- if @proxy_buffer_size -%>
proxy_buffer_size <%= @proxy_buffer_size %>;
<%- end -%>
<%- if @proxy_buffering -%>
proxy_buffering on;
<%- end -%>
<%- if @proxy_buffers -%>
proxy_buffers <%= @proxy_buffers['number'] %> <%= @proxy_buffers['size'] %>;
<%- end -%>
<%- if @proxy_busy_buffers_size -%>
proxy_busy_buffers_size <%= @proxy_busy_buffers_size %>;
<%- end -%>
<%- if @proxy_cache -%>
proxy_cache <%= @proxy_cache %>;
<%- end -%>
<%- if @proxy_cache_background_update -%>
proxy_cache_background_update on;
<%- end -%>
<%- if @proxy_cache_bypass -%>
<%-   @proxy_cache_bypass.each {|b| -%>
proxy_cache_bypass <%= b %>;
<%-   } -%>
<%- end -%>
<%- if @proxy_cache_convert_head -%>
proxy_cache_convert_head on;
<%- end -%>
<%- if @proxy_cache_key -%>
proxy_cache_key <%= @proxy_cache_key %>
<%- end -%>
<%- if @proxy_cache_lock -%>
proxy_cache_lock on;
<%- end -%>
<%- if @proxy_cache_lock_age -%>
proxy_cache_lock_age <%= @proxy_cache_lock_age %>;
<%- end -%>
<%- if @proxy_cache_lock_timeout -%>
proxy_cache_lock_timeout <%= @proxy_cache_lock_timeout %>;
<%- end -%>
<%- if @proxy_cache_max_range_offset -%>
proxy_cache_max_range_offset <%= @proxy_cache_max_range_offset %>;
<%- end -%>
<%- if @proxy_cache_methods -%>
proxy_cache_methods <%= @proxy_cache_methods.join(" ") %>;
<%- end -%>
<%- if @proxy_cache_min_uses -%>
proxy_cache_min_uses <%= @proxy_cache_min_uses %>;
<%- end -%>
<%- if @proxy_cache_path -%>
proxy_cache_path <%= @proxy_cache_path.collect{|k,v| "#{k}=#{v}"}.join(" ") %>;
<%- end -%>
<%- if @proxy_cache_purge -%>
<%-   @proxy_cache_purge.each {|c| -%>
proxy_cache_purge <%= c %>;
<%-   } -%>
<%- end -%>
<%- if @proxy_cache_revalidate -%>
proxy_cache_revalidate <%= @proxy_cache_revalidate %>;
<%- end -%>
<%- if @proxy_cache_use_stale -%>
proxy_cache_use_stale <%= @proxy_cache_use_stale.join(" ") %>;
<%- end -%>
<%- if @proxy_cache_valid -%>
<%-   @proxy_cache_valid.each {|k,v| -%>
proxy_cache_valid <%= "#{k} #{v}" %>;
<%-   } -%>
<%- end -%>
<%- if @proxy_connect_timeout -%>
proxy_connect_timeout <%= @proxy_connect_timeout %>;
<%- end -%>
<%- if @proxy_cookie_domain -%>
<%-   @proxy_cookie_domain.each {|v| -%>
proxy_cookie_domain <%= v %>;
<%-   } -%>
<%- end -%>
<%- if @proxy_cookie_path -%>
<%-   @proxy_cookie_path.each {|k, v| -%>
proxy_cookie_path <%= "#{k} #{v}" %>;
<%-   } -%>
<%- end -%>
<%- if @proxy_force_ranges -%>
proxy_force_ranges on;
<%- end -%>
<%- if @proxy_headers_hash_bucket_size -%>
proxy_headers_hash_bucket_size <%= @proxy_headers_hash_bucket_size %>;
<%- end -%>
<%- if @proxy_headers_hash_max_size -%>
proxy_headers_hash_max_size <%= @proxy_headers_hash_max_size %>;
<%- end -%>
<%- if @proxy_hide_header -%>
proxy_hide_header <%= @proxy_hide_header %>;
<%- end -%>
<%- if @proxy_http_version -%>
proxy_http_version <%= @proxy_http_version %>;
<%- end -%>
<%- if @proxy_ignore_client_abort -%>
proxy_ignore_client_abort on;
<%- end -%>
<%- if @proxy_ignore_headers -%>
<%-   @proxy_ignore_headers.each {|v| -%>
proxy_ignore_headers <%= v %>;
<%-   } -%>
<%- end -%>
<%- if @proxy_intercept_errors -%>
proxy_intercept_errors on;
<%- end -%>
<%- if @proxy_limit_rate -%>
proxy_limit_rate <%= @proxy_limit_rate %>;
<%- end -%>
<%- if @proxy_max_temp_file_size -%>
proxy_max_temp_file_size <%= @proxy_max_temp_file_size %>;
<%- end -%>
<%- if @proxy_method -%>
proxy_method <%= @proxy_method %>;
<%- end -%>
<%- if @proxy_next_upstream -%>
proxy_next_upstream <%= @proxy_next_upstream.join(" ") %>;
<%- end -%>
<%- if @proxy_next_upstream_timeout -%>
proxy_next_upstream_timeout <%= @proxy_next_upstream_timeout %>;
<%- end -%>
<%- if @proxy_next_upstream_tries -%>
proxy_next_upstream_tries <%= @proxy_next_upstream_tries %>;
<%- end -%>
<%- if @proxy_no_cache -%>
<%-   @proxy_no_cache.each {|v| -%>
proxy_no_cache <%= v %>;
<%-   } -%>
<%- end -%>
<%- if @proxy_pass_header -%>
proxy_pass_header <%= @proxy_pass_header %>;
<%- end -%>
<%- if @proxy_pass_request_body -%>
proxy_pass_request_body on;
<%- end -%>
<%- if @proxy_pass_request_headers -%>
proxy_pass_request_headers on;
<%- end -%>
<%- if @proxy_read_timeout -%>
proxy_read_timeout <%= @proxy_read_timeout %>;
<%- end -%>
<%- if @proxy_redirect -%>
<%-   @proxy_redirect.each {|k, v| -%>
proxy_redirect <%= "#{k} #{v}" %>;
<%-   } -%>
<%- end -%>
<%- if @proxy_request_buffering -%>
proxy_request_buffering on;
<%- end -%>
<%- if @proxy_send_lowat -%>
proxy_send_lowat <%= @proxy_send_lowat %>;
<%- end -%>
<%- if @proxy_send_timeout -%>
proxy_send_timeout <%= @proxy_send_timeout %>;
<%- end -%>
<%- if @proxy_set_body -%>
proxy_set_body <%= @proxy_set_body %>;
<%- end -%>
<%- if @proxy_set_header -%>
<%-   @proxy_set_header.each {|k, v| -%>
proxy_set_header <%= "#{k} #{v}" %>;
<%-   } -%>
<%- end -%>
<%- if @proxy_ssl_certificate -%>
proxy_ssl_certificate <%= @proxy_ssl_certificate %>;
<%- end -%>
<%- if @proxy_ssl_certificate_key -%>
proxy_ssl_certificate_key <%= @proxy_ssl_certificate_key %>;
<%- end -%>
<%- if @proxy_ssl_ciphers -%>
proxy_ssl_ciphers <%= @proxy_ssl_ciphers %>;
<%- end -%>
<%- if @proxy_ssl_crl -%>
proxy_ssl_crl <%= @proxy_ssl_crl %>;
<%- end -%>
<%- if @proxy_ssl_name -%>
proxy_ssl_name <%= @proxy_ssl_name %>;
<%- end -%>
<%- if @proxy_ssl_password_file -%>
proxy_ssl_password_file <%= @proxy_ssl_password_file %>;
<%- end -%>
<%- if @proxy_ssl_server_name -%>
proxy_ssl_server_name on;
<%- end -%>
<%- if @proxy_ssl_session_reuse -%>
proxy_ssl_session_reuse on;
<%- end -%>
<%- if @proxy_ssl_protocols -%>
proxy_ssl_protocols <%= @proxy_ssl_protocols.join(" ") %>;
<%- end -%>
<%- if @proxy_ssl_trusted_certificate -%>
proxy_ssl_trusted_certificate <%= @proxy_ssl_trusted_certificate %>;
<%- end -%>
<%- if @proxy_ssl_verify -%>
proxy_ssl_verify on;
<%- end -%>
<%- if @proxy_ssl_verify_depth -%>
proxy_ssl_verify_depth <%= proxy_ssl_verify_depth %>;
<%- end -%>
<%- if @proxy_store -%>
proxy_store <%= proxy_store %>;
<%- end -%>
<%- if @proxy_store_access -%>
proxy_store_access <%= proxy_store_access %>;
<%- end -%>
<%- if @proxy_temp_file_write_size -%>
proxy_temp_file_write_size <%= proxy_temp_file_write_size %>;
<%- end -%>
<%- if @proxy_temp_path -%>
proxy_temp_path <%= proxy_temp_path %>;
<%- end -%>

