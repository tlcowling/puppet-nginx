<%- nginx_config_user_line = [@user, @group].reject{|x| x.nil? || x.empty? }.join(" ") -%>
user <%= nginx_config_user_line %>;
pid <%= @pid %>;
<%- if @daemon -%>
daemon on;
<%- end -%>
<%- if @lock_file -%>
lock_file <%= @lock_file %>;
<%- end -%>
<%- if @pcre_jit -%>
pcre_jit on;
<%- end -%>
<%- if @timer_resolution -%>
timer_resolution <%= @timer_resolution %>;
<%- end -%>
<%- if @ssl_engine -%>
ssl_engine <%= @ssl_engine %>;
<%- end -%>

include http.conf;
include events.conf;

stream {
  include streams.d/*;
}

