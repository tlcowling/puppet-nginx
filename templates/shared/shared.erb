<%- if @absolute_redirect-%>
  absolute_redirect on;
<%- end -%>
<%- if @aio-%>
  aio on;
<%- end -%>
<%- if @aio_write-%>
  aio_write on;
<%- end -%>
<%- if @chunked_transfer_encoding -%>
  chunked_transfer_encoding on;
<%- end -%>
<%- if @client_body_buffer_size -%>
  client_body_buffer_size <%= @client_header_buffer_size %>;
<%- end -%>
<%- if @client_body_in_file_only -%>
  client_body_in_file_only <%= @client_body_in_file_only %>;
<%- end -%>
<%- if @client_body_in_single_buffer -%>
  client_body_in_single_buffer on;
<%- end -%>
<%- if @client_body_timeout -%>
  client_body_timeout <%= @client_body_timeout %>;
<%- end -%>
<%- if @client_body_temp_path -%>
  client_body_temp_path <%= @client_body_temp_path %>;
<%- end -%>
<%- if @client_max_body_size -%>
  client_max_body_size <%= @client_max_body_size %>;
<%- end -%>
<%- if @default_type -%>
  default_type <%= @default_type %>;
<%- end -%>
<%- if @directio -%>
  directio <%= @directio %>;
<%- end -%>
<%- if @directio_alignment -%>
  directio_alignment <%= @directio_alignment %>;
<%- end -%>
<%- if @disable_symlinks -%>
  disable_symlinks <%= @disable_symlinks %>;
<%- end -%>
<%- if @error_log -%>
<%-   @error_log.each {|el| -%>
error_log <%= el['path'] %> <%= el['level'] %>;
<%-   } -%>
<%- end -%>
<%- if @etag-%>
  etag on;
<%- end -%>
<%- if @if_modified_since -%>
  if_modified_since <%= @if_modified_since %>;
<%- end -%>
<%- if @keepalive_disable -%>
  keepalive_disable <%= @keepalive_disable %>;
<%- end -%>
<%- if @keepalive_requests -%>
  keepalive_requests <%= @keepalive_requests %>;
<%- end -%>
<%- if @keepalive_timeout -%>
  keepalive_timeout <%= @keepalive_timeout %>;
<%- end -%>
<%- if @limit_rate -%>
  limit_rate <%= @limit_rate %>;
<%- end -%>
<%- if @limit_rate_after -%>
  limit_rate_after <%= @limit_rate_after %>;
<%- end -%>
<%- if @lingering_close == 'off' -%>
  lingering_close off;
<%- elsif @lingering_close == 'always' -%>
  lingering_close always;
<%- else -%>
  lingering_close on;
<%- end -%>
<%- if @lingering_time -%>
  lingering_time <%= @lingering_time %>;
<%- end -%>
<%- if @lingering_timeout -%>
  lingering_timeout <%= @lingering_timeout %>;
<%- end -%>
<%- if @log_not_found-%>
  log_not_found on;
<%- end -%>
<%- if @log_subrequest -%>
  log_subrequest on;
<%- end -%>
<%- if @max_ranges -%>
  max_ranges <%= @max_ranges %>;
<%- end -%>
<%- if @msie_padding -%>
  msie_padding on;
<%- end -%>
<%- if @msie_refresh -%>
  msie_refresh on;
<%- end -%>
<%- if @open_file_cache -%>
<%- open_file_cache_line = [] -%>
<%- @open_file_cache.each{|k, v| -%>
<%-   open_file_cache_line << "#{k}=#{v}" -%>
<%- } -%>
  open_file_cache <%= open_file_cache_line.join(" ") %>;
<%- end -%>
<%- if @open_file_cache_errors -%>
  open_file_cache_errors on;
<%- end -%>
<%- if @open_file_cache_min_uses -%>
  open_file_cache_min_uses <%= @open_file_cache_min_uses %>;
<%- end -%>
<%- if @open_file_cache_valid -%>
  open_file_cache_valid <%= @open_file_cache_valid %>;
<%- end -%>
<%- if @output_buffers -%>
  output_buffers <%= @output_buffers %>;
<%- end -%>
<%- if @port_in_redirect -%>
  port_in_redirect on;
<%- end -%>
<%- if @postpone_output -%>
  postpone_output <%= @postpone_output %>;
<%- end -%>
<%- if @read_ahead -%>
  read_ahead <%= @read_ahead %>;
<%- end -%>
<%- if @recursive_error_pages -%>
  recursive_error_pages on;
<%- end -%>
<%- if @request_pool_size -%>
  request_pool_size <%= @request_pool_size %>;
<%- end -%>
<%- if @reset_timed_out_connection -%>
  reset_timed_out_connection on;
<%- end -%>
<%- if @resolver -%>
<%-   resolver_line = [@resolver['addresses']] -%>
<%-   if @resolver['valid'] -%>
<%-     resolver_line << "valid=#{@resolver['valid']}" -%>
<%-   end -%>
<%-   if @resolver['ipv6'] -%>
<%-     resolver_line << "ipv6=on" -%>
<%-   end -%>
  resolver <%= resolver_line.join(" ") %>;
<%- end -%>
<%- if @resolver_timeout -%>
  resolver_timeout <%= @resolver_timeout %>;
<%- end -%>
<%- if @root -%>
  root <%= @root %>;
<%- end -%>
<%- if @satisfy -%>
  satisfy <%= @satisfy %>;
<%- end -%>
<%- if @send_lowat -%>
  send_lowat <%= @send_lowat %>;
<%- end -%>
<%- if @send_timeout -%>
  send_timeout <%= @send_timeout %>;
<%- end -%>
<%- if @sendfile -%>
  sendfile on;
<%- end -%>
<%- if @sendfile_max_chunk -%>
  sendfile_max_chunk <%= @sendfile_max_chunk %>;
<%- end -%>
<%- if @server_name_in_redirect -%>
  server_name_in_redirect on;
<%- end -%>
<%- if @server_tokens -%>
  server_tokens on;
<%- end -%>
<%- if @tcp_nodelay -%>
  tcp_nodelay on;
<%- end -%>
<%- if @tcp_nopush -%>
  tcp_nopush on;
<%- end -%>
<%- if @types_hash_bucket_size -%>
  types_hash_bucket_size <%= @types_hash_bucket_size %>;
<%- end -%>
<%- if @types_hash_max_size -%>
  types_hash_max_size <%= @types_hash_max_size %>;
<%- end -%>